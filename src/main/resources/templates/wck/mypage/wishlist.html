<html lang="ko" class="back" xmlns:th="http://www.thymeleaf.org">
<th:block th:replace="wck/includes/head :: head_tag(title='위시리스트 | 더한섬닷컴')"></th:block>
<script type="text/javascript" th:src="@{/js/layers.js}"></script>
  <body class="back">
    <style>
      .swiper-wrapper {
        height: auto;
      }
    </style>
    <!-- Loading -->
    <div style="display: none">
      <div id="loadingBarDiv" style="display: none"></div>
    </div>
    <!-- //Loading -->

    <div class="layerArea" id="mapleLayer" style="display: none">
      <div class="layerBg"></div>
    </div>

    <!-- ################## hsome_allContents_wrapper | ë³¸ë¬¸ ì»¨íì¸  ìì­ ################## -->
    <div class="hsome_allContents_wrapper">
      <div class="hsome_allContents fixed_btn_on">
        <header class="hsome_header header_noline header_mypage">
          <!-- 마이페이지 알림 아이콘 -->
          <a href="/ko/main" class="h_top_home"><span>Home</span></a>
          <h1 class="h_select">
            <select
              id="headerMypageSelect"
              onchange="GA_Event('마이페이지', 'MY_GNB', this.selectedOptions[0].text.replaceAll(' ', '').replace('신청/조회',''));">
              <option value="" style="display: none"></option>
              <option value="/ko/mypage/mypageFloatingPopup">
                마이페이지<!-- 마이페이지 -->
              </option>
              <option value="/ko/mypage/order/myorders">
                주문/배송조회<!-- 주문/배송조회 -->
              </option>

              <option value="/ko/mypage/rsalarm">
                재입고 알림<!-- 재입고/세일 알림 -->
              </option>
              <option value="/ko/mypage/myWish">
                마이하트<!-- 위시리스트 -->
              </option>
              <option value="/ko/svcenter/mobilemain">
                고객센터<!-- 고객센터 -->
              </option>
              <option value="/ko/mypage/personInfomationChange">
                개인정보변경<!-- 개인정보변경 -->
              </option>
              <option value="/ko/mypage/mydelivery">
                배송지 관리<!-- 배송지 관리 -->
              </option>
              <option value="/ko/mypage/voucher">쿠폰<!-- 쿠폰 --></option>
              <option value="/ko/mypage/myreview">상품평<!-- 상품평 --></option>
              <option value="/ko/mypage/mymantomaninquiry">
                1:1 문의<!-- 1:1 문의 -->
              </option>
              <option value="/ko/mypage/myqna">
                상품 Q&amp;A<!-- 상품 Q&A -->
              </option>
              <option value="/ko/mypage/event/myevents">
                나의 이벤트<!-- 나의 이벤트 -->
              </option>
            </select>
            <div class="selected_text">
              <span> 마이하트</span>
            </div>

            <script type="text/javascript">
              $(document).on('change', '#headerMypageSelect', function () {
                if ($(this).val() == '') return;

                if ($(this).val() == '/ko/mypage/mymantomaninquiry') {
                  location.href =
                    '/ko/mypage/mymantomaninquiry?refererUrl=mypage';
                } else {
                  location.href = $(this).val();
                }
              });
              $('#headerMypageSelect > option').each(function (idx, obj) {
                if ($(obj).attr('value') == '') return true;
                if (location.pathname == $(obj).attr('value')) {
                  $(obj).prop('selected', 'selected');
                }

                if (
                  location.pathname.indexOf('mantomaninquiry') > -1 &&
                  $(obj).attr('value').indexOf('mymantomaninquiry') > -1
                ) {
                  $(obj).prop('selected', 'selected');
                }
              });
            </script>
          </h1>
          <a href="javascript:noLink();" onclick="goBack();" class="h_prev"
            >이전 페이지로 가기</a
          >
          <ul class="h_gnbMenu">
            <li class="search">
              <a href="/ko/mobilecommon/search"><span>search</span></a>
            </li>
            <li class="cart">
              <a href="/ko/shoppingbag"><span>cart</span><i>0</i></a>
            </li>
          </ul>
        </header>

        <!-- contents s -->

        <div id="contents" class="hsome_contents mp_wishlist_wrap">
          <ul class="ui_tab red_border_tab fw active">
            <li class="on">
              <a
                id="tab_wish1"
                href="#tab_01"
                >위시리스트</a>
            </li>

           </ul>
          <div class="tab_cont">
            <!-- #tab_01 s -->
            <div id="tab_01" class="cont on">
              <!-- 추가(47745) : 20180813 s -->
              <div class="gray_box wish_desc_box">
                <ul class="ul_dot">
                  <li>위시리스트에는 상품이 최대 200개까지 저장됩니다.</li>
                  <li>
                    마이하트에 담은 상품 중 판매종료가 된 상품은 자동삭제됩니다.
                  </li>
                </ul>
              </div>

              <!-- 추가(47745) : 20180813 e -->
              <div class="hs_product_list_wrap">
                <div class="sort_chk">
                  <a href="javascript:void(0);" class="del">선택상품삭제</a>
                </div>

                <div class="hs_product_list" id="prodWishlists">
                  <ul></ul>
                </div>

                <div id="pagination1" class="hs_paging bottom">
                </div>

                <div class="btn_wrap btn_wrap_div1 btm_fixed_wrap on">
                  <!-- <div class="wish_to_order"><a href="lp_wish_to_order.html" class="btnstl6 solid_btn_point btn_layerpopup_call" data-layerpop-style="lp_stl_black" data-layerpop-depth="depth1"><span>선택상품 (5개) 주문</span></a></div> -->
                  <div class="wish_to_order">
                    <a
                      href="javascript:void(0);"
                      onclick="goWishToOrderPopup(this); return false;"
                      class="btnstl6 solid_btn_point"
                      data-layerpop-style="lp_stl_black"
                      data-layerpop-depth="depth1"
                      ><span id="orderBtn">쇼핑백담기</span></a
                    >
                  </div>
                </div>
              </div>
            </div>

            <!-- #tab_02 s -->
            <div id="tab_02" class="cont">
              <div class="wish_cont_wrap">
                <p>지난 기획전의 경우 1주일 후에 자동 삭제됩니다.</p>
                <ul id="wishContents"></ul>

                <div id="pagination2" class="hs_paging bottom"></div>
              </div>
            </div>
          </div>
        </div>
        <!-- contents e -->

        <script>
          var $product_list = $('.hs_product_list_wrap .hs_product_list ul li');
          function product_list_effect() {
            $product_list.each(function () {
              //리스트 스크롤 효과
              if (
                $(window).scrollTop() + $(window).height() >
                $(this).offset().top
              ) {
                $(this).addClass('active');
              } else {
                $(this).removeClass('active');
              }
            });
          }

          $(function () {
            //	$('.h_select > .selected_text span').html('위시리스트'); //페이지 제목 입력
            //currentQuickMenuOn('mypage'); //quick_menu 활성화

            $('.hsome_quickMenu').css('display', 'none'); //gn삭제()

            //180813 마이하트 리스트 슬라이드 시작
            var myheartSwiperClass =
              '.mp_wishlist_wrap .hs_product_list .img_slide_wrap.active.swiper-container';
            if ($(myheartSwiperClass).length > 0) {
              new Swiper(myheartSwiperClass, { loop: true });
            }
            //180813 마이하트 리스트 슬라이드 끝
            //

            $('body').on(
              'click',
              '.mp_wishlist_wrap .chk_mark input',
              function () {
                if ($(this).is(':checked')) {
                  $(this).parents('li').find('.func_as').addClass('active');
                } else {
                  $(this).parents('li').find('.func_as').removeClass('active');
                }

                // 쇼핑백 담기 기능 변경으로 사용 안함 : 20180828
                // 재적용 : 20180831
                var chkedcnt = 0;
                $('.mp_wishlist_wrap .chk_mark input').each(function () {
                  if ($(this).is(':checked')) chkedcnt += 1;
                });
                var txtHtml = '';
                if (chkedcnt === 0) {
                  txtHtml += '쇼핑백담기';
                } else {
                  txtHtml += '쇼핑백담기(' + chkedcnt + ')';
                }
                $('#orderBtn').html(txtHtml);
              }
            );

            $('body').on(
              'click',
              '.mp_wishlist_wrap .hs_product_list_wrap .info_cont .color_chip .chip',
              function () {
                $chipId = $(this).attr('id');
                $activeSlide = $(this)
                  .parents('li')
                  .find('.img_slide_contain')
                  .children('.' + $chipId + '');

                if ($activeSlide.hasClass('active') == false) {
                  $(this)
                    .parents('li')
                    .find('.img_slide_contain .img_slide_wrap')
                    .removeClass('active');
                  $activeSlide.addClass('active');
                  new Swiper($activeSlide, {
                    loop: true,
                  });
                }
              }
            );

            product_list_effect();
          });

          $(window).scroll(function () {
            product_list_effect();
          });



          var wishtoorderproc = false;
          function goWishToOrderPopup($this) {
            if (wishtoorderproc) return;

            wishtoorderproc = true;

            var chkedcnt = 0;
            var wishcodes = '';
            $('.mp_wishlist_wrap .chk_mark input').each(function () {
              if ($(this).is(':checked')) {
                chkedcnt += 1;
                wishcodes += ',' + $(this).attr('data-value');
              }
            });
            if (wishcodes !== '') {
              wishcodes = wishcodes.substring(1);
            }
            //alert(deltarget.substring(1));

            if (chkedcnt === 0) {
              wishtoorderproc = false;

              var la = new layerAlert('상품을 선택해 주세요');
              return false;
            } else {
              wishtoorderproc = false;

              $('.hsome_layerpop_contents.lp_depth1').addClass(
                'dir_h lp_stl_black visible active'
              );
              $('.layerpop_wrap.lp_wish_to_order_wrap').removeClass(
                'visible active activated'
              );

             /*  layerPopupOpen(
                '/ko/mypage/wishToOrderPopup?wishcodes=' + wishcodes,
                '.hsome_layerpop_contents.lp_depth1',
                '.layerpop_wrap.lp_wish_to_order_wrap'
              ); */
            }
          }
        </script>

        <!-- ################## footer ################## -->
        <!-- 푸터 공지 추가 220404 -->
        <footer th:replace="wck/includes/footer :: fragment-footer"></footer>
        <!-- // 푸터 공지 추가 220404 -->
        <!-- //################## footer ################## -->
      </div>
    </div>
    <!-- ################## //hsome_allContents_wrapper | ë³¸ë¬¸ ì»¨íì¸  ìì­ ################## -->
    <a
      href="noLink();"
      class="hsome_topBtn upper"
      id="handsomeTopBtn"
      style="bottom: 60px"
      >mobile.bottom.top</a
    ><!-- 20180530 추가 -->

    <!-- ################## hsome_quickMenu | 퀵메뉴 ################## -->
    <aside
      class="hsome_quickMenu hsome_quickMenu1909 active"
      style="display: none">
      <ul>
        <li class="shop">
          <a
            href="/ko/mobilecommon/navShop"
            onclick="GA_Event('공통', '네비게이션_바', '샵');"
            ><i>메뉴</i></a
          >
        </li>
        <li class="sns">
          <a
            href="/ko/sns/main"
            onclick="GA_Event('공통', '네비게이션_바', '타임라인');"
            ><i>스타일 LIVE</i></a
          >
        </li>
        <li class="home">
          <a
            href="javascript:noLink();"
            onclick="goMainpage();GA_Event('공통', '네비게이션_바', '홈');"
            ><i>홈</i></a
          >
        </li>
        <li class="myheart active" id="gnbMyheartBtn">
          <a
            href="/ko/mypage/myWish"
            onclick="GA_Event('공통', '네비게이션_바', '마이하트');"
            ><i>마이하트</i></a
          >
        </li>
        <li class="mypage" id="gnbMyPageBtn">
          <a
            href="javascript:noLink();"
            onclick="goMypage();GA_Event('공통', '네비게이션_바', '마이페이지');"
            ><i>마이페이지</i></a
          >
        </li>
        <li class="mypage pageMove" style="display: none">
          <a href="" id="gnbMypageBtn"></a>
        </li>
        <li class="mypage" style="display: none">
          <a href="/ko/mobilecommon/myPagePopup" id="gnbMypagePopupBtn"></a>
        </li>
      </ul>
    </aside>
    <!-- ################## //hsome_quickMenu | 퀵메뉴 ################## -->

    <div class="fixed_dim_layer" onclick="familySiteSelectClosed();"></div>
    <div class="family_site_popup_191108">
      <ul>
        <li>
          <a
            href="http://m.hfashionmall.com/sfmmbl/mbl/main.do"
            target="_blank"
            onclick="GA_Event('공통', '푸터_CNT', 'FAMILYSITE_H패션몰');"
            >H패션몰<!-- H패션몰 --></a
          >
        </li>
        <li>
          <a
            href="https://m.hyundaihmall.com/front/index.do"
            target="_blank"
            onclick="GA_Event('공통', '푸터_CNT', 'FAMILYSITE_현대홈쇼핑');"
            >현대홈쇼핑<!-- (주)현대홈쇼핑 --></a
          >
        </li>
        <li>
          <a
            href="https://m.thehyundai.com/Home.html"
            target="_blank"
            onclick="GA_Event('공통', '푸터_CNT', 'FAMILYSITE_더현대닷컴');"
            >더현대닷컴<!-- 더현대닷컴 --></a
          >
        </li>
        <li>
          <a
            href="http://mall.hyundailivart.co.kr/front/index_org.lv"
            target="_blank"
            onclick="GA_Event('공통', '푸터_CNT', 'FAMILYSITE_현대리바트');"
            >현대리바트<!-- (주)현대 리바트 --></a
          >
        </li>
        <li>
          <a
            href="https://www.h-point.co.kr/cu/main/index.nhd"
            target="_blank"
            onclick="GA_Event('공통', '푸터_CNT', 'FAMILYSITE_H.Point');"
            >H.Point</a
          >
        </li>
        <li>
          <a
            href="http://www.ehyundai.com/newPortal/ir/main.do"
            target="_blank"
            onclick="GA_Event('공통', '푸터_CNT', 'FAMILYSITE_현대백화점그룹');"
            >현대백화점그룹<!-- 현대백화점 그룹 --></a
          >
        </li>
      </ul>
      <a
        href="#;"
        class="family_site_popup_close"
        onclick="familySiteSelectClosed();"
        >닫기<!-- 닫기 --></a
      >
    </div>
    <!-- ################## hsome_quickMenu_contents | 퀵메뉴 컨텐츠 영역 ################## -->
    <div class="hsome_quickMenu_contents"></div>
    <!-- //################## hsome_quickMenu_contents | 퀵메뉴 컨텐츠 영역 ################## -->

    <script type="text/javascript">
      $(document).ready(function () {
        if (false) {
          $('#cateTab').click();
        }
      });

      function closeAction() {
        $('.twoDepthNavPopup').hide();
        $('.one_lists.on').toggleClass('on');
      }
    </script>

    <div
      class="divpop_wrap_dev pop_mbr pop_alert_confirm"
      id="popAlertConfirmDiv"></div>

    <!-- layerpopupContent s -->
    <!-- hsome_layer_menu_contents | 레이어팝업메뉴 컨텐츠 영역 s -->
    <!-- depth1 s -->
    <div class="hsome_layerpop_contents lp_depth1 dir_h lp_stl_black">
    
    <script type="text/javascript">
		var wishlength= "8";
		var price = 0;
		var delidx= "";
		var cartQuantity = {};
		
		$(document).ready(function() {
			
		    
		
			$(document).on("click", ".lyrpp_top .lyrpp_close.btn_lyrpp_close", function() {
				$('.hsome_layerpop_contents.lp_depth1').removeClass('visible active')
			});
			
		
			$(document).on("click", ".wish_order_box_wrap .wish_order_box .color_wrap button.chip", function() {
				var prodcode = $(this).attr("id").replace("info_", "");
				var datavals = $(this).attr("data-value").split("#");
				var idx      = datavals[0];
				var colorName= (datavals.length > 1)?datavals[1]:"";
				var isQtyLimitProduct = $('#wish_order_'+idx).find('[name=qtyLimitProductYn]').val();
				//console.log(idx + " >>> " + prodcode + " : " + colorName);
		
				//alert($(this).find('span').attr('class'));
				if ( $(this).find("span").attr("class") === "soldout" ) {
					var la = new layerAlert("품절 상품입니다.");
					return false;
				} else {
					$(".wish_order_box_wrap .wish_order_box.wish_order_"+idx+" .color_wrap button.chip").removeClass("on");
					$(this).addClass("on");
					
					$.ajax({
						url		: "/ko/mypage/reloadProdSize",
						type	: "POST",
						datatype: "json",
						data	: {
							productCode : prodcode,
							CSRFToken	: "1c70f754-643f-405f-b686-164b4fb656cd"
						},
						success	: function(data) {
							//console.log(Object.entries(data));
							
							$(".wish_order_box.wish_order_"+idx+" .txt_color_chip").html(colorName);
							var product = data.product;
							
							/* 가격변경 */
				            var productPrice = data.getProductPrice;
				            var priceHtml = '';
				            
				            
				                    priceHtml += "￦"+ addComma(productPrice.productPrice);
				                    if(productPrice.productNormalityPrice != undefined && productPrice.productNormalityPrice != ""){
				                        priceHtml += "<strike>" + "￦" +addComma(productPrice.productNormalityPrice)+"</strike>";
				                    }
				                
		                    if(priceHtml != ''){
		                        $(".wish_order_box.wish_order_"+idx+" .wish_order_info .price").html(priceHtml);
		                    }
		                    
							// 이미지
							var txtImage = '';
							if ( product.productImages != null ) {
								for ( var i=0; i<product.productImages.length; i++ ) {
									images = product.productImages[i];
									if ( images.imageDivisionCode.code === 'S01' ) {
										txtImage += '<img src="'+images.image.url+'" alt="">';
										break;
									}
								}
							}
							$(".wish_order_box.wish_order_"+idx+" .wish_order_thumb").html(txtImage);
							// 사이즈
							$(".wish_order_box.wish_order_"+idx+" .sel_size_"+idx).empty();
							$(".wish_order_box.wish_order_"+idx+" .sel_size_"+idx).append("<option value=''>사이즈</option>");
							var size = product.variantOptions;
							for ( var i=0; i < size.length; i++ ) {
								if ( size[i].stock.stockLevel > 0 && size[i].stock.stockLevelStatus != 'outOfStock' ) {
									var qualifier = size[i].variantOptionQualifiers;
									stockLevel = wishlistProductStock(size[i].code);
									for (var j=0; j < qualifier.length; j++ ) {
										if ( qualifier[j].qualifier === 'displayErpSize') {
											$(".wish_order_box.wish_order_"+idx+" .sel_size_"+idx).append("<option value='"+qualifier[j].value+"#"+stockLevel+"#"+(data.onlyStorePickup == null?'':data.onlyStorePickup)+"'>"+qualifier[j].value+"</option>");
										}
									}
								}
							}
						}
					});
				}
			});
		
			$(document).on("change", "[id^=sel_size_]", function(){
		        var stock = $(this).val();
		        var idx = $(this).attr("id").split("_")[2];
		        var isQtyLimitProduct = $('#wish_order_'+idx).find('[name=qtyLimitProductYn]').val();
		        if(stock != ""){
		            var temp = stock.split("#");
		            $("#sel_qty_"+idx+" option").remove();
		            for(var i=0;i<temp[1];i++){
		            	
		            	if(isQtyLimitProduct == 'true' && i > 1) break;
		            	
		                $("#sel_qty_"+idx).append("<option value='"+(i+1)+"'>"+(i+1)+"</option>");              
		            }
		        }
		    });
			
			$('.color_wrap button.chip').click();
		});
		
		//화면 add 중복오류로 function으로 수정
		function addToCartWishlist(){
		   var deledIdxs = delidx.substring(1).split(",");
		   
		   var selcnt   = 0;
		   var errorcnt = 0;
		   
		   var productCode = "";
		   var size = "";
		   var qty  = "";
		   var promotionYn  = "";
		   
		   var wish_order, idx;
		   
		   $(".wish_order_box_wrap .wish_order_box").each(function() {
		       selcnt++;
		       
		       wish_order = $(this).attr("id");
		       idx = wish_order.replace("wish_order_", "");
		       tempCode = $("#"+wish_order+" .color_wrap button.chip.on").attr("id");
		       tempSize = $("#sel_size_"+idx+" option:selected").val();
		       tempQty  = $("#sel_qty_"+idx+" option:selected").val();
		       tempPromotion  = $("#promotionProduct"+idx+"").val();
		       
		       if ( tempCode === "" ) {
		           errorcnt++;
		           var la = new layerAlert("색상을 선택해 주세요."); //색상
		           return false;
		       } else {
		           productCode += ","+tempCode;
		       }
		       if ( tempSize === "" ) {
		           errorcnt++;
		           var la = new layerAlert("사이즈를 선택해 주세요."); //수량
		           return false;
		       } else {
		           size += ","+tempSize;
		       }
		       if ( tempQty === "0" ) {
		           errorcnt++;
		           var la = new layerAlert("수량은 0보다 커야 합니다."); // There aren`t properties.
		           return false;
		       } else {
		           qty += ","+tempQty;
		       }
		       
		       
		       //#2610 [주문] 가상계좌 결제수단 제외 및 중복 구매 제한 처리 요청 건 20220215 hyunbae
		       tempQtyLimitProductYn = $("#qtyLimitProductYn"+idx+"").val();
		       tempSizeCode = tempCode + '_' + tempSize.split('#')[0];
		       tempCartQuantity = cartQuantity[tempCode + '_' + tempSize.split('#')[0]];
		       tempBrandName = $(this).find('.wish_order_info .brand').text();
		       tempProductName = $(this).find('.wish_order_info .name').text().trim();
		       
		       if( tempQtyLimitProductYn == 'true' && !isNaN(tempCartQuantity)){
		    	   if(parseInt(tempCartQuantity) + parseInt(tempQty) > 2){
		    		   var la = new layerAlert('['+tempBrandName+'] ['+tempProductName+']의<br/>구매 가능한 수량 '+tempCartQuantity+'개가<br/>이미 쇼핑백에 담겨있습니다.<br/><p style="color:gray; font-size:14px; margin-top:8px;">(동일 상품은 최대 2개까지 구매 가능)</p>');
		    		   errorcnt++;
		    	       return false;
		    	   }
		       }
		       
		       promotionYn += ","+ tempPromotion;
		   });
		   
		   if ( errorcnt === 0 ) {
		       setValues(productCode.substring(1), size.substring(1), qty.substring(1), promotionYn.substring(1));
		   }
		}
		
		function setValues(productCode, size, qty, promotionProduct) {
			var execnt = 0;
			var exetime= 0;
		
			var productCodes = productCode.split(",");
			var sizes = size.split(",");
			var qtys  = qty.split(",");
			var promotionProducts  = promotionProduct.split(",");
			var chkPromoProducts = 0; //프로모션 상품이 존재하는가
			for ( var i=0; i < promotionProducts.length; i++ ) {
			    if(promotionProducts[i] == "true"){
				    chkPromoProducts++;
			    }
			}
			
			for ( var i=0; i < productCodes.length; i++ ) {
				$("form#addToCartForm input[name='productCodePost']").val('');
				$("form#addToCartForm input[name='stockCnt']").val('');
				$("form#addToCartForm input[name='qty']").val('1');
				$("form#addToCartForm input[name='onlyStorePickup']").val('');
				$("form#addToCartForm input[name='CSRFToken']").val("");
				execnt++;
		
				var details = sizes[i].split("#");
				var prodCode = productCodes[i] + "_" + details[0];
				if ( details[2] == "true" && "true") {
					var la = new layerAlert("매장수령 전용 상품입니다. <br />리스트의 제품 사진을 클릭하여, 상품 상세화면으로 이동해주세요. 수령을 원하는 매장을 상품상세페이지에서 지정 후, 구매 가능합니다.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;");
					break;
				}
				if ( details[1] < 1 ) {
					var la = new layerAlert("해당사이즈는 품절입니다.");
					break;
				}
				if ( details[1] < qtys[i] ) {
					var la = new layerAlert("해당 상품의 재고 수량이 충분하지 않습니다. ");
					break;
				}
		
		/*		
				$("form#addToCartForm input[name='productCodePost']").val(prodCode);
				$("form#addToCartForm input[name='stockCnt']").val(details[1]);
				$("form#addToCartForm input[name='qty']").val(qtys[i]);
				$("form#addToCartForm input[name='onlyStorePickup']").val(details[2]);
				$("form#addToCartForm input[name='CSRFToken']").val("1c70f754-643f-405f-b686-164b4fb656cd");
		*/		
		
		        var chkPromtion = false;
				if(promotionProducts[i] == true || promotionProducts[i] == "true"){
				    
			        $.ajax({
			            url: '/ko/mypage/checkCartProduct',
			            type: "GET",            
			            data: {productCode: prodCode},
			            async : false,
			            success: function(data){
			                if(data == true) { //기존 cart에 존재하면
			                    chkPromtion = true;
			                    if(chkPromoProducts == productCodes.length){
				                    var la = new layerAlert('동일 옵션(컬러/사이즈)으로 최대 1개 구매 가능합니다.'); //"이미 프로모션 상품이 담겨있습니다."
				                    return;
			                    }
			                }
			            },
			            error: function(xhr, Status, error) {
			                //
			            }
			       });
				        
				}
		
				if(!chkPromtion) {
				    if ( execnt === 1 && execnt < productCodes.length ) {
				        if((productCodes.length-1) - chkPromoProducts == 0){
		                    addToCart(execnt, prodCode, details[1], qtys[i], details[2], "Y");                    
		                }else{
				            addToCart(execnt, prodCode, details[1], qtys[i], details[2]);
		                }
			        } else if ( execnt === 1 && execnt === productCodes.length ) {
			            addToCart(execnt, prodCode, details[1], qtys[i], details[2], "Y");
			        } else {
			            if ( execnt < productCodes.length ) {
			                //setTimeout(function(){
			                if((productCodes.length-1) - chkPromoProducts == 0){
			                    addToCart(execnt, prodCode, details[1], qtys[i], details[2], "Y");                    
			                }else{
			                    addToCart(execnt, prodCode, details[1], qtys[i], details[2], "N");    
			                }
			                //}, exetime);
			            } else {
			                //setTimeout(function(){
			                    addToCart(execnt, prodCode, details[1], qtys[i], details[2], "Y");
			                //}, exetime);
			            }
			        }
			        //exetime += 5000;
				}
			}
		}
		async function addToCart(cnt, productCode, stockCnt, qty, onlyStockPiciup, lastYn) {
		
			$("form#addToCartForm input[name='productCodePost']").val(productCode);
			$("form#addToCartForm input[name='stockCnt']").val(stockCnt);
			$("form#addToCartForm input[name='qty']").val(qty);
			$("form#addToCartForm input[name='onlyStorePickup']").val(onlyStockPiciup);
			$("form#addToCartForm input[name='CSRFToken']").val("1c70f754-643f-405f-b686-164b4fb656cd");
		
		//setTimeout(function() {
			$.ajax({
				url		: "/ko/shoppingbag/add",
				type	: "POST",
				async	: false,
				data	: $("form#addToCartForm").serialize(),
				success	: function(data) {
					var errorMsg = data;
					if (errorMsg === null || errorMsg === "") {
						if ( lastYn === "Y" ) {
						    GA_Event('마이하트', '하단 고정 버튼', '쇼핑백담기');
						    setEcommerceData2();
							var lc = new layerConfirm("쇼핑백에 담겼습니다.<br />확인하시겠습니까?", "쇼핑백 바로가기", "취소");
							lc.cancleAction  = function(){
								$(".lyrpp_top .lyrpp_close.btn_lyrpp_close").trigger("click");
								myWishListProd(1);
								window.location.reload();
							}						
							lc.confirmAction = function(){
								window.location.href="/ko/shoppingbag";
							};
						}
					} else {
						$(".lyrpp_top .lyrpp_close.btn_lyrpp_close").trigger("click");
						myWishListProd(1);
						
						var la = new layerAlert(errorMsg);
						return false;					
					}
				}
			});
			//}, 1000); 
		
		}
		function numberWithCommas(x) {
			// 세자리마다 콤마(,) 추가
		    return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
		}
		
		
	
		
		
		
		</script>

		
		<!-- layerpop_wrap | 위시리스트 주문하기 s -->
		<div class="layerpop_wrap lp_wish_to_order_wrap visible active activated">
			
			<!-- layerpop_top s -->
			<div class="lyrpp_top">
				<a href="#none" class="lyrpp_close lyrpp_close_stl3  btn_lyrpp_close"><span>닫기</span></a>
			</div>
			<!-- layerpop_top e -->
		
			<!-- layerpop_middle s -->
			<div class="lyrpp_mid" style="height: 590px;">
				<div class="wish_order_box_wrap">
				
				<!-- 위시리스트 개별상품 s -->
					<div class="wish_order_box wish_order_0" id="wish_order_0" style="display:block;">
					    <input type="hidden" id="promotionProduct0" name="promotionProduct" value="false">
					    <input type="hidden" id="qtyLimitProductYn0" name="qtyLimitProductYn" value="true">
						<div class="wish_order_thumb"><img src="http://newmedia.thehandsome.com/MN/2D/SS/MN2D1WJC221W_BK_S01.jpg" alt=""></div>
						<div class="wish_order_info">
							<p class="brand">MINE</p>
							<p class="name">울 블렌드 싱글 재킷</p>
							<p class="price">￦1,050,000</p>
							
							<!-- 색상 버튼 -->
							<div class="color_wrap">
								<div class="hs_btn_color_chip">
								<button type="button" id="MN2D1WJC221W_BK" class="chip on" data-value="0#BLACK" style="background:#000000 url('http://newmedia.thehandsome.com/MN/2D/SS/MN2D1WJC221W_BK_C01.jpg/dims/resize/60x60') center /100% auto no-repeat;"></button>
												</div>
								<div class="txt_color_chip">BLACK</div><!-- 선택한 색상 정보 -->
							</div>
							<!--// 색상 버튼 -->
							
							<ul class="btn_wrap btn_wrap_div2">
								<!-- 사이즈 버튼 -->
								<li class="btnstl border_btn_gray hs_border_select">
									<select name="sel_size_0" id="sel_size_0" class="sel_size_0"><option value="">사이즈</option><option value="76#7#false">76</option><option value="82#9#false">82</option><option value="88#4#false">88</option></select>
								</li>
								<!--// 사이즈 버튼 -->
		
								<!-- 수량 버튼 -->
								<li class="btnstl border_btn_gray hs_border_select">
									<select name="sel_qty_0" id="sel_qty_0" class="sel_qty">
										<option value="0">수량</option>
										<option value="1" selected="selected">1</option>
										<option value="2">2</option>
										</select>
								</li>
								<!--// 수량 버튼 -->
							</ul>
						</div>
					</div>
					<!-- 위시리스트 개별상품 e -->
				</div>
			</div>
			<!-- layerpop_middle e -->
		
			<!-- layerpop_bottom s -->
			<div class="lyrpp_btm">
				<!-- 주문/결제로 이동 -->        
				<div class="btm_fixed_wrap btn_wrap btn_wrap_div1 on">
					<div class="wish_to_order">
						<a href="#none" class="btnstl6 solid_btn_blk" onclick="javascript:addToCartWishlist()"><span><b>선택완료</b></span></a>
					</div>
				</div>  
			</div>
			<!-- layerpop_bottom e -->
		</div>
		<!-- layerpop_wrap | 위시리스트 주문하기 e -->
		
		<div id="submitForm">
		</div>
		
		
		<script>
			$(document).ready(function() {
		    	lpSizeCheck($('.lp_wish_to_order_wrap')); //레이어팝업 사이즈 체크 후 lypp_mid height 조정
		//    	//추후삭제필요 : 디자인 컴펌용
		//    	$('.layerpop_wrap').parent().addClass('lp_stl_black');
			});
			
			$(document).ready(function() {
			});
		</script>

</div>
    <!-- depth1 e -->
    <!-- depth2 s -->
    <div class="hsome_layerpop_contents lp_depth2"></div>
    <!-- depth2 e -->
    <!-- depth3 s -->
    <div class="hsome_layerpop_contents lp_depth3"></div>
    <!-- depth3 e -->
    <!-- depth4 s -->
    <div class="hsome_layerpop_contents lp_depth4"></div>
    <!-- depth4 e -->
    <!-- depth5 s -->
    <div class="hsome_layerpop_contents lp_depth5"></div>
    <!-- depth5 e -->
    <!-- depth6 s -->
    <div class="hsome_layerpop_contents lp_depth6"></div>
    <!-- depth6 e -->
    <!-- depth7 s -->
    <div class="hsome_layerpop_contents lp_depth7"></div>
    <!-- depth7 e -->
    <!-- depth8 s -->
    <div class="hsome_layerpop_contents lp_depth8"></div>
    <!-- depth8 e -->
    <script>
      $(document).ready(function () {
    	let pageNum = 1;
    	let count = 0;
    	//TODO : count 가져오기
        getWishList(1);
        function getWishList(currentPage) {
        	pageNum = currentPage;
        	
          $.ajax({
            url: '/api/member/like?currentPage=' + currentPage,
            method: 'get',
            dataType: 'json',
            success: function (data) {
              console.log(data);
              printWishList(data['list']);
              count = data['count'];
              showPaging(count);
            },
          });
        }

        function printWishList(list) {
          $('.hs_product_list ul').html('');
          $(list).each(function (idx, data) {
            let tmp = '';
            $(data.colors).each(function (idx, chip) {
              let isFirst = '';
              if (idx == 0) isFirst = 'on';

              let chipTemplate = `
                            <button
                            class="chip ${isFirst}"
                            data-value="${chip.pcId}"
                            id="slide0101"
                            style="
                              background: #23416e
                                url('${chip.pcChipImg}')
                                center / 100% auto no-repeat;
                            "></button>
                        `;
              tmp += chipTemplate;
              //TODO : 페이징 번호 생성
            });

            let template = `
                        <li id="${data.pid}" class="float active">
                        <div class="img_slide_container">
                          <a
                            href="/ko/p/MM2D1WOT022HDE_CR"
                            class="img_slide_contain">
                            <div
                              class="img_slide_wrap swiper-container slide0101 active">
                              <div class="img_slide swiper-wrapper">
                                <div class="img swiper-slide">
                                  <img
                                    src="${data.colors[0].pcImg1}"
                                    alt="" />
                                </div>
                              </div>
                            </div>
                          </a>
                          <span class="func_as">
                            <a class="del"
                              >삭제</a
                            >
                          </span>
                        </div>
                        <div class="info_cont">
                          <div class="color_chip">
                           	${tmp}
                          </div>
                          <a href="javascript:void(0);">
                            <p class="brand">${data.bname}</p>
                            <p class="name">${data.pname}</p>
                            <p class="price">￦${data.colors[0].pcPrice}</p>
                          </a>
                        </div>
                        <label class="chk_mark">
                          <input
                            type="checkbox"
                            name="chkbox"
                            data-value="${data.pid}" />
                          <span class="mark"></span>
                        </label>
                      </li>
    				
    				`;
            $('.hs_product_list ul').append(template);
          });
          $('.chip').click(function (e) {
            if ($(this).hasClass('on')) return;

            let pcValue = $(this).data('value');
            $(this).siblings().removeClass('on');
            $(this).addClass('on');
            let pValue = pcValue.split('_')[0];

            $.ajax({
              url: '/api/product/' + pValue + '/color/' + pcValue,
              method: 'get',
              dataType: 'json',
              success: function (data) {
                console.log(pValue + ' ' + pcValue);
                $('li#' + pValue + ' .swiper-slide img').attr(
                  'src',
                  data.pcImg1
                );
              },
              error: function (request, status, error) {
                console.log(request);
                console.log(status);
                console.log(error);
              },
            });
          });

          $('.func_as .del').click(function (e) {
            let pVal = $(this).closest('li').attr('id');
            console.log(pVal);
            $.ajax({
              url: '/api/member/like/' + pVal,
              method: 'post',
              success: function (data) {
                console.log(data);
                getWishList(1);
              },
            });
          });
        }

        $('.sort_chk').click(function () {
          let list = $('.chk_mark input');
          list.each(function (idx, t) {
            if ($(t).is(':checked')) {
              let pId = $(t).data('value');
              console.log('delete : ' + pId);
              $.ajax({
                url: '/api/member/like/' + pId,
                method: 'post',
                success: function (data) {
                  console.log(data);
                  if (list.length == idx + 1) {
                    console.log('fin');
                    getWishList(1);
                  }
                },
              });
            }
          });
        });

        function showPaging(count) {
        	$('#pagination1').html('');
        	if(count == 0) {
        		return;
        	}
          let endNum = Math.ceil(pageNum / 10.0) * 10;
          let startNum = endNum - 9;

          let prev = startNum != 1;
          let next = false;

          if (endNum * 10 >= count) {
            endNum = Math.ceil(count / 10.0);
          }
          if (endNum * 10 < count) {
            next = true;
          }
          console.log(endNum+" "+next);
          let str = '';
          let prevDisable = '';
          if (!prev) {
            prevDisable = 'disabled';
          }
          str += `<a href="#" class="pre ${prevDisable}">이전</a>`;
          for (let i = startNum; i <= endNum; i++) {
            let isCur = '';

            if (pageNum == i) isCur = 'cur';
            let tmp = `<a href="${i}" class="${isCur}">${i}</a>`;

            str += tmp;
          }
          let nextDisable = '';
          if (!next) nextDisable = 'disabled';
          str += `<a href="#" class="nxt ${nextDisable}">다음</a>`;
		  $('#pagination1').html(str);
          
		  $('#pagination1 a').click(function(e){
			  e.preventDefault();
			  let num = $(this).attr('href');
			  window.scrollTo(0,0);
			  getWishList(num);
		  })
        }

        
      });
    </script>
  </body>
  <!-- This script is for AceCounter START -->
</html>
