<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<th:block th:replace="wck/includes/head :: head_tag(title='더한섬닷컴')"></th:block>

  <body class="back">
    <div class="hsome_allContents_wrapper">
      <div class="hsome_allContents">
        <script type="text/javascript">
          function goMainpage() {
            window.sessionStorage.removeItem('moveYn');
            location.href = '/ko/main';
          }
        </script>

        <!-- ################## header ################## -->
        <header class="hsome_header">
          <h1 class="h_ttl ellipsis" id="headerTitle">이벤트상세보기</h1>
          <a href="javascript:noLink();" onclick="goBack();" class="h_prev"
            >이전 페이지로 가기</a
          >
          <ul class="h_gnbMenu">
            <li class="search">
              <a
                href="/ko/mobilecommon/search"
                onclick="GA_Event('공통', '헤더', '검색');"
                ><span>search</span></a
              >
            </li>
            <li class="cart">
              <a
                href="/ko/shoppingbag"
                onclick="GA_Event('공통', '헤더', '쇼핑백');"
                ><span>cart</span><i>0</i></a
              >
            </li>
          </ul>
        </header>
        <!-- //################## header ################## -->
        <style>
          .newBrands_evt.hs_event_viewThumb {
            position: relative;
          }
          .newBrands_evt_con {
            position: relative;
            margin-bottom: 21px;
          }
          .newBrands_evt_con a {
            position: absolute;
            text-indent: -9999px;
            width: 44.7%;
            height: 3.9%;
            top: 91.6%;
          }
          .newBrands_evt .share_wrap {
            display: block;
            width: 30.15%;
            height: 4.5%;
            top: 52.3%;
            left: 11%;
            overflow: hidden;
            position: absolute;
          }
          .newBrands_evt .share_wrap a {
            display: block;
            width: 33%;
            height: 49.9%;
            float: left;
          }
          .shopnow_clubmonaco {
            left: 4.2%;
          }
          .shopnow_obzee {
            right: 4.2%;
          }
          .notice_open {
            width: 100%;
            height: 2.2%;
            position: absolute;
            top: 97%;
            text-indent: -9999px;
          }
          .notice_open.on {
            top: 97%;
          }
          .notice_txt {
            display: none;
          }
        </style>

        
        <!-- ################## contents ################## -->
        <div class="hsome_contents">
          <div class="hs_special_viewTitle">
            <h2 th:text="${event.title}">신규회원님을 위한 특별 혜택</h2>
            <div class="date" th:text="${event.issueDate}+' ~ '+${event.expireDate}">2022.11.01 ~ 2023.12.31</div>
            <div class="right_btns">
              <a href="/wck/event" class="list"><i>목록</i></a>
              <a
                href=".hs_share_pop"
                onclick="javascript:initShareData('/ko/magazine/events/','8802941687680', 'http://cdn.thehandsome.com/mobile/event/list/banner/20221213_57502766557262152_ko.jpg','[이벤트] 신규회원님을 위한 특별 혜택','신규회원님을 위한 특별 혜택')"
                class="share btn_popup_btot"
                >공유</a
              >
            </div>
          </div>
          <div class="evt_info">
            <div class="hs_event_viewThumb newBrands_evt">
              <!-- 1 -->
              <p>
                <script th:inline="javascript">
              
                  $(document).ready(function () {
                	  isJoined();
                	  
                	  /*<![CDATA[*/
                	  function isJoined(){
                		  let eno = /*[[${event.no}]]*/;
                		  $.ajax({
                			  url: "/api/event/"+eno+"/check",
                			  method : 'get',
                			  success : function(result){
                				  if(result){
                					  $('#coupon_btn').attr("disabled",true);
                					  $('#coupon_btn').text("이미 발급받은 쿠폰 입니다.")
                				  }
                			  }
                		  })
                		  
                	  }
                	  /*]]>*/
                	  
                	  /*<![CDATA[*/
                    $('#coupon_btn').click(function(e){
                    	let eno = /*[[${event.no}]]*/;
                    	console.log('click btn');
                    	$.ajax({
              			  url: "/api/event/"+eno+"/coupon",
              			  method : 'post',
              			  success : function(result){
              				  if(result == "SUCCESS"){
              					  console.log('coupon issue success')
              					  isJoined();
              				  }
              			  }
              		  })
                    	
                    })
                    /*]]>*/
                  });
                  
                </script>
              </p>
              <style>
                <!--
                .evt-mob-newmember {position:relative;}
                .evt-mob-newmember .download-wrap {position:relative;}
                .evt-mob-newmember .download-wrap a{position:absolute;left:50%;transform:translateX(-50%);bottom:13.067vw;width:81.333vw;height:20.4vw;text-indent:-9999px;}

                .evt-mob-newmember .link-wrap {position:relative;}
                .evt-mob-newmember .link-wrap a {display:block;text-indent:-9999px;}
                .evt-mob-newmember .link-wrap a:nth-child(2){margin-top:4vw}
                .evt-mob-newmember .notice_wrap {margin-top:10.667vw}
                .evt-mob-newmember .new_member_notice {cursor:pointer;}
                -->
              </style>
              <div class="evt-mob-newmember">
                <div>
                  <img
                    style="display: block; width: 100%"
                    th:src="${event.content}"
                    src="http://cdn.thehandsome.com/mobile/event/detail/image/handsome_202212/event_newmember_dec_mob_img_01.jpg"
                    alt="" />
                  <img
                    style="display: block; width: 100%"
                    th:src="${event.detailImg}"
                    src="http://cdn.thehandsome.com/mobile/event/detail/image/handsome_202212/event_newmember_dec_mob_img_02.jpg"
                    alt="" />
                </div>
                <div style="text-align:center">
                	<button id="coupon_btn" style="padding: 10px 10px; font-weight:bold; font: 20px;">쿠폰발급받기</button>
                </div>
              </div>
              <!-- //1 -->
            </div>

            <!-- reply_wrap -->
            <!-- //reply_wrap -->
          </div>
        </div>
        <!-- //hsome_contents -->
        <!-- 	<input type="hidden" id="shareKey" name="shareKey"> -->
        <!-- 	<input type="hidden" id="shareImgUrl" name="shareImgUrl"> -->
        <!-- 	<input type="hidden" id="shareText" name="shareText"> -->
        <!-- //################## contents ################## -->

        <script
          type="text/javascript"
          src="//static.addtoany.com/menu/page.js"></script>
        <div class="hs_pro_view_layer"></div>
        <!-- 팝업 배경 레이어 -->

        <!-- ################## footer ################## -->
        <!-- 푸터 공지 추가 220404 -->
        <footer th:replace="wck/includes/footer :: fragment-footer"></footer>
        <!-- // 푸터 공지 추가 220404 -->
        <!-- //################## footer ################## -->
      </div>
    </div>
    <!-- ################## //hsome_allContents_wrapper | ë³¸ë¬¸ ì»¨íì¸  ìì­ ################## -->
    <a href="noLink();" class="hsome_topBtn upper" id="handsomeTopBtn"
      >mobile.bottom.top</a
    ><!-- 20180530 추가 -->

    <!-- ################## hsome_quickMenu | 퀵메뉴 ################## -->
    <aside class="hsome_quickMenu hsome_quickMenu1909 active">
      <ul>
        <li class="shop">
          <a
            href="/ko/mobilecommon/navShop"
            onclick="GA_Event('공통', '네비게이션_바', '샵');"
            ><i>메뉴</i></a
          >
        </li>
        <li class="sns">
          <a
            href="/ko/sns/main"
            onclick="GA_Event('공통', '네비게이션_바', '타임라인');"
            ><i>스타일 LIVE</i></a
          >
        </li>
        <li class="home">
          <a
            href="javascript:noLink();"
            onclick="goMainpage();GA_Event('공통', '네비게이션_바', '홈');"
            ><i>홈</i></a
          >
        </li>
        <li class="myheart" id="gnbMyheartBtn">
          <a
            href="/ko/mypage/myWish"
            onclick="GA_Event('공통', '네비게이션_바', '마이하트');"
            ><i>마이하트</i></a
          >
        </li>
        <li class="mypage" id="gnbMyPageBtn">
          <a
            href="javascript:noLink();"
            onclick="goMypage();GA_Event('공통', '네비게이션_바', '마이페이지');"
            ><i>마이페이지</i></a
          >
        </li>
        <li class="mypage pageMove" style="display: none">
          <a href="/ko/member/login" id="gnbMypageBtn"></a>
        </li>
        <li class="mypage" style="display: none">
          <a href="/ko/mobilecommon/myPagePopup" id="gnbMypagePopupBtn"></a>
        </li>
      </ul>
    </aside>
    <!-- ################## //hsome_quickMenu | 퀵메뉴 ################## -->

    <div class="fixed_dim_layer" onclick="familySiteSelectClosed();"></div>
    <div class="family_site_popup_191108">
      <ul>
        <li>
          <a
            href="http://m.hfashionmall.com/sfmmbl/mbl/main.do"
            target="_blank"
            onclick="GA_Event('공통', '푸터_CNT', 'FAMILYSITE_H패션몰');"
            >H패션몰<!-- H패션몰 --></a
          >
        </li>
        <li>
          <a
            href="https://m.hyundaihmall.com/front/index.do"
            target="_blank"
            onclick="GA_Event('공통', '푸터_CNT', 'FAMILYSITE_현대홈쇼핑');"
            >현대홈쇼핑<!-- (주)현대홈쇼핑 --></a
          >
        </li>
        <li>
          <a
            href="https://m.thehyundai.com/Home.html"
            target="_blank"
            onclick="GA_Event('공통', '푸터_CNT', 'FAMILYSITE_더현대닷컴');"
            >더현대닷컴<!-- 더현대닷컴 --></a
          >
        </li>
        <li>
          <a
            href="http://mall.hyundailivart.co.kr/front/index_org.lv"
            target="_blank"
            onclick="GA_Event('공통', '푸터_CNT', 'FAMILYSITE_현대리바트');"
            >현대리바트<!-- (주)현대 리바트 --></a
          >
        </li>
        <li>
          <a
            href="https://www.h-point.co.kr/cu/main/index.nhd"
            target="_blank"
            onclick="GA_Event('공통', '푸터_CNT', 'FAMILYSITE_H.Point');"
            >H.Point</a
          >
        </li>
        <li>
          <a
            href="http://www.ehyundai.com/newPortal/ir/main.do"
            target="_blank"
            onclick="GA_Event('공통', '푸터_CNT', 'FAMILYSITE_현대백화점그룹');"
            >현대백화점그룹<!-- 현대백화점 그룹 --></a
          >
        </li>
      </ul>
      <a
        href="#;"
        class="family_site_popup_close"
        onclick="familySiteSelectClosed();"
        >닫기<!-- 닫기 --></a
      >
    </div>
    <!-- ################## hsome_quickMenu_contents | 퀵메뉴 컨텐츠 영역 ################## -->
    <div class="hsome_quickMenu_contents"></div>
    <!-- //################## hsome_quickMenu_contents | 퀵메뉴 컨텐츠 영역 ################## -->

    <script type="text/javascript">
      $(document).ready(function () {
        if (false) {
          $('#cateTab').click();
        }
      });

      function closeAction() {
        $('.twoDepthNavPopup').hide();
        $('.one_lists.on').toggleClass('on');
      }
    </script>

    <script type="text/javascript">
      /*
layer popup 형식의 alert 창

========================[example code]===========================
layerAlert('메세지를 입력하세요');

var lc = new layerAlert('입력하신 정보가 변경완료 되었습니다.');
lc.confirmAction = function(){
  //alert화면 실행후 후속 처리 부분 추가
  location.href="/ko/mypage/order/myorders";
};
=============================================================
*/

      var btnConfirmText = '확인';
      var btnCancleText = '취소';
      var btnCloseText = '닫기';
      var layerAlert = function (msg, refresh) {
        btnConfirmText = '확인';
        var t = this;
        this.confirmAction = function () {
          //console.log('함수를 재정의 해주세요!');
        };

        var alertTag = '';
        alertTag += '<div class="dvp_container">';
        alertTag +=
          '	<div class="dvp_close_btn b-close" id="alertCloseDiv"><span>' +
          btnCloseText +
          '</span></div>';
        alertTag += '	<h1 class="dvp_header"></h1>';
        alertTag += '	<div class="dvp_content">';
        alertTag += '		<div class="desc_box">' + msg + '</div>';
        alertTag += '	</div>';
        alertTag += '	<div class="btn_wrap">';
        alertTag +=
          '		<button class="btn btn_bg_b btn-alert-confirm">' +
          btnConfirmText +
          '</button>';
        alertTag += '	</div>';
        alertTag += '</div>';

        $('#popAlertConfirmDiv').html(alertTag);

        $('.divpop_wrap_dev.pop_alert_confirm').bPopup({
          follow: [false, false],
          escClose: false,
          modalClose: false,
          opacity: 0.3,
          positionStyle: 'fixed',
          onClose: function () {
            holdBodyHide();
            $('#popAlertConfirmDiv').html('');
          },
        });
        holdBodyShow();

        $('#popAlertConfirmDiv')
          .find('.btn-alert-confirm')
          .click(function () {
            if (refresh == true) location.reload();
            $('#alertCloseDiv').click();
            t.confirmAction();
          });
      };

      /*
layer popup 형식의 alert 창 변형 -> 팝업창에서의 팝업창일 때 확인 누르거나 X 눌렀을 때 holdBodyHide();를 타면서 Gnb가 나타나는 현상 때문에 layerAlertGnb로 하나 추가하여
refresh 변수 제거, onClose function 제거

========================[example code]===========================
layerAlertGnb('메세지를 입력하세요');

var la = new layerAlertGnb('입력하신 정보가 변경완료 되었습니다.');

=============================================================
*/
      var layerAlertGnb = function (msg) {
        btnConfirmText = '확인';
        var t = this;
        this.confirmAction = function () {
          //console.log('함수를 재정의 해주세요!');
        };

        var alertTag = '';
        alertTag += '<div class="dvp_container">';
        alertTag +=
          '	<div class="dvp_close_btn b-close" id="alertCloseDiv"><span>' +
          btnCloseText +
          '</span></div>';
        alertTag += '	<h1 class="dvp_header"></h1>';
        alertTag += '	<div class="dvp_content">';
        alertTag += '		<div class="desc_box">' + msg + '</div>';
        alertTag += '	</div>';
        alertTag += '	<div class="btn_wrap">';
        alertTag +=
          '		<button class="btn btn_bg_b btn-alert-confirm">' +
          btnConfirmText +
          '</button>';
        alertTag += '	</div>';
        alertTag += '</div>';

        $('#popAlertConfirmDiv').html(alertTag);

        $('.divpop_wrap_dev.pop_alert_confirm').bPopup({
          follow: [false, false],
          escClose: false,
          modalClose: false,
          opacity: 0.3,
          positionStyle: 'fixed',
          /* onClose: function() { 
        holdBodyHide();
        $("#popAlertConfirmDiv").html("");
      } */ //body 클래스 scroll 상태 유지
        });
        holdBodyShow();

        $('#popAlertConfirmDiv')
          .find('.btn-alert-confirm')
          .click(function () {
            //if(refresh==true) location.reload(); //refresh check 제거
            $('#alertCloseDiv').click();
            t.confirmAction();
          });
      };

      /*
layer popup 형식의 confirm 창



========================[example code]===========================

var lc = new layerConfirm('메세지를 입력하세요', '확인버튼', '취소버튼');
lc.confirmAction = function(){
  console.log('재정의한 함수입니다.');
};

=============================================================

*/
      var layerConfirm = function (msg, confirmMsg, cancleMsg) {
        var t = this;

        var t = this;
        this.confirmAction = function () {
          //console.log('함수를 재정의 해주세요!');
        };
        this.cancleAction = function () {
          //console.log('함수를 재정의 해주세요!');
        };

        if (confirmMsg != '') {
          btnConfirmText = confirmMsg;
        } else {
          btnConfirmText = '확인';
        }
        if (cancleMsg != '') {
          btnCancleText = cancleMsg;
        } else {
          btnCancleText = '취소';
        }

        var confirmTag = '';
        confirmTag += '<div class="dvp_container">';
        confirmTag +=
          '	<div class="dvp_close_btn b-close" id="confirmCloseDiv"><span>' +
          btnCloseText +
          '</span></div>';
        confirmTag += '	<div class="dvp_content">';
        confirmTag += '		<div class="desc_box">' + msg + '</div>';
        confirmTag += '	</div>';
        confirmTag += '	<div class="btn_wrap btns">';
        confirmTag +=
          '		<button class="btn btn_bd_g btn-alert-close">' +
          btnCancleText +
          '</button>';
        confirmTag +=
          '		<button class="btn btn_bg_b btn-alert-confirm">' +
          btnConfirmText +
          '</button>';
        confirmTag += '	</div>';
        confirmTag += '</div>';

        $('#popAlertConfirmDiv').html(confirmTag);

        $('.divpop_wrap_dev.pop_alert_confirm').bPopup({
          follow: [false, false],
          escClose: false,
          modalClose: false,
          opacity: 0.3,
          positionStyle: 'fixed',
          onClose: function () {
            holdBodyHide();
            $('#popAlertConfirmDiv').html('');
          },
        });
        holdBodyShow();

        $('#popAlertConfirmDiv')
          .find('.btn-alert-close')
          .click(function () {
            $('#confirmCloseDiv').click();
            t.cancleAction();
          });

        $('#popAlertConfirmDiv')
          .find('.btn-alert-confirm')
          .click(function () {
            $('#confirmCloseDiv').click();
            t.confirmAction();
          });
      };

      /*
layer popup 형식의 confirm 창
특정 ios 기종에서 하단 버튼부분이 짤려나오는 현상이 있어서 ios용으로 별도 생성
*/
      var layerConfirmIos = function (msg, confirmMsg, cancleMsg) {
        var t = this;

        var t = this;
        this.confirmAction = function () {
          //console.log('함수를 재정의 해주세요!');
        };
        this.cancleAction = function () {
          //console.log('함수를 재정의 해주세요!');
        };

        if (confirmMsg != '') {
          btnConfirmText = confirmMsg;
        } else {
          btnConfirmText = '확인';
        }
        if (cancleMsg != '') {
          btnCancleText = cancleMsg;
        } else {
          btnCancleText = '취소';
        }

        var confirmTag = '';
        confirmTag += '<div class="dvp_container">';
        confirmTag +=
          ' <div class="dvp_close_btn b-close" id="confirmCloseDiv"><span>' +
          btnCloseText +
          '</span></div>';
        confirmTag += ' <div class="dvp_content">';
        confirmTag += ' <div class="desc_box">' + msg + '</div>';
        confirmTag += ' </div>';
        confirmTag += ' <div class="btn_wrap btns">';
        confirmTag +=
          ' <button class="btn btn_bd_g btn-alert-close">' +
          btnCancleText +
          '</button>';
        confirmTag +=
          ' <button class="btn btn_bg_b btn-alert-confirm">' +
          btnConfirmText +
          '</button>';
        confirmTag += ' </div>';
        confirmTag += '</div>';

        $('#popAlertConfirmDiv').html(confirmTag);

        $('.divpop_wrap_dev.pop_alert_confirm').bPopup({
          follow: [false, false],
          escClose: false,
          modalClose: false,
          opacity: 0.3,
          positionStyle: 'fixed',
          onClose: function () {
            holdBodyHide();
            $('#popAlertConfirmDiv').html('');
          },
        });
        $('.divpop_wrap_dev.pop_alert_confirm').css({
          top: '50%',
          margin: '0',
          transform: 'translate3d(0, -50%, 0)',
        });
        holdBodyShow();

        $('#popAlertConfirmDiv')
          .find('.btn-alert-close')
          .click(function () {
            $('#confirmCloseDiv').click();
            t.cancleAction();
          });

        $('#popAlertConfirmDiv')
          .find('.btn-alert-confirm')
          .click(function () {
            $('#confirmCloseDiv').click();
            t.confirmAction();
          });
      };

      /*
       * var lc = new layerConfirm2('메세지를 입력하세요', '취소버튼', '확인버튼');
       */
      var layerConfirm2 = function (msg, confirmMsg, cancleMsg) {
        var t = this;

        var t = this;
        this.confirmAction = function () {
          //console.log('함수를 재정의 해주세요!');
        };
        this.cancleAction = function () {
          //console.log('함수를 재정의 해주세요!');
        };

        if (confirmMsg != '') {
          btnConfirmText = confirmMsg;
        } else {
          btnConfirmText = '확인';
        }
        if (cancleMsg != '') {
          btnCancleText = cancleMsg;
        } else {
          btnCancleText = '취소';
        }

        var confirmTag = '';
        confirmTag += '<div class="dvp_container">';
        confirmTag +=
          ' <div class="dvp_close_btn b-close" id="confirmCloseDiv"><span>' +
          btnCloseText +
          '</span></div>';
        confirmTag += ' <div class="dvp_content">';
        confirmTag += '     <div class="desc_box">' + msg + '</div>';
        confirmTag += ' </div>';
        confirmTag += ' <div class="btn_wrap btns">';
        confirmTag +=
          '     <button class="btn btn_bg_b btn-alert-confirm">' +
          btnConfirmText +
          '</button>';
        confirmTag +=
          '     <button class="btn btn_bd_g btn-alert-close">' +
          btnCancleText +
          '</button>';
        confirmTag += ' </div>';
        confirmTag += '</div>';

        $('#popAlertConfirmDiv').html(confirmTag);

        $('.divpop_wrap_dev.pop_alert_confirm').bPopup({
          follow: [false, false],
          escClose: false,
          modalClose: false,
          opacity: 0.3,
          positionStyle: 'fixed',
          onClose: function () {
            holdBodyHide();
            $('#popAlertConfirmDiv').html('');
          },
        });
        holdBodyShow();

        $('#popAlertConfirmDiv')
          .find('.btn-alert-close')
          .click(function () {
            $('#confirmCloseDiv').click();
            t.cancleAction();
          });

        $('#popAlertConfirmDiv')
          .find('.btn-alert-confirm')
          .click(function () {
            $('#confirmCloseDiv').click();
            t.confirmAction();
          });
      };

      var editableLayer = function (msg, style, refresh) {
        btnConfirmText = '확인';
        var t = this;
        this.confirmAction = function () {
          //console.log('함수를 재정의 해주세요!');
        };

        var alertTag = '';
        alertTag += '<div class="dvp_container" style="' + style + '">';
        alertTag +=
          '   <div class="dvp_close_btn b-close" id="alertCloseDiv"><span>' +
          btnCloseText +
          '</span></div>';
        alertTag += '   <h1 class="dvp_header"></h1>';
        alertTag += '   <div class="dvp_content" style="margin-top: -21px;">';
        alertTag += '       <div class="desc_box">' + msg + '</div>';
        alertTag += '   </div>';
        alertTag += '   <div class="btn_wrap" style="margin-top: 0px;">';
        alertTag +=
          '       <button class="btn btn_bg_b btn-alert-confirm">' +
          btnConfirmText +
          '</button>';
        alertTag += '   </div>';
        alertTag += '</div>';

        $('#popAlertConfirmDiv').html(alertTag);

        $('.divpop_wrap_dev.pop_alert_confirm').bPopup({
          follow: [false, false],
          escClose: false,
          modalClose: false,
          opacity: 0.3,
          positionStyle: 'fixed',
          onClose: function () {
            holdBodyHide();
            $('#popAlertConfirmDiv').html('');
          },
        });
        holdBodyShow();

        $('#popAlertConfirmDiv')
          .find('.btn-alert-confirm')
          .click(function () {
            if (refresh == true) location.reload();
            $('#alertCloseDiv').click();
          });
        $('#alertCloseDiv').click(function () {
          t.confirmAction();
        });
      };

      /*
       * 챗봇 관련 스크립트
       */
      // 앱이 백그라운도 들어 갈 때에
      //function  appWillEnterBackground() {
      //    alert("enter background");
      //
      //}
      // 앱이 포어그라운드로 들어갈 때에
      //function appDidEnterForground() {
      //    alert("enter foreground");
      //
      //}
      // 챗봇의 푸시링크를 클릭했을 때
      function openChatView(token, talkId) {
        callChatbot(token, talkId);
      }

      function callChatbot(token, talkId) {
        if (token == null) {
          $.ajax({
            type: 'POST',
            url: '/ko/chatbot/token',
            data: { CSRFToken: '73c7c901-c15e-40a0-873d-a9fc95a16280' },
            async: false,
            success: function (data) {
              if (data.result == 'SHOULD_LOGIN') {
                var la = new layerAlert('로그인이 필요합니다');
                la.confirmAction = function () {
                  //확인 버튼 클릭시 추가 호출 펑션
                  location.href = '/ko/member/login';
                };
              } else if (data.result == 'NOT_VIP') {
                var la = new layerAlert('VVIP 회원님만 이용 가능하십니다');
                la.confirmAction = function () {
                  //확인 버튼 클릭시 추가 호출 펑션
                };
              } else if (data.result == 'OFF-HOURS') {
                //일반 : CREW, FRIEND, 간편회원일경우, 평일 오전 9시 30분 ~ 오후 6시 30분만 사용가능
                var la = new layerAlert(
                  '채팅상담 서비스는 평일 오전 9시 ~ 오후 6시에 이용 가능하십니다.'
                );
                la.confirmAction = function () {
                  //확인 버튼 클릭시 추가 호출 펑션
                };
              } else {
                if (data.token != '') {
                  token = data.token;
                }
              }
            },
            error: function (e) {},
          });
        }

        if (token != null && token != '') {
          try {
            ga('gp.send', 'pageview', {
              title: '하니톡_채팅서비스', //가상페이지 화면명
              location: 'http://www.thehandsome.com/ko/hanitalk', //가상페이지URL
            });
          } catch (e) {
            console.log(e);
          }
          $('#chatbot_token').val(token);
          $('#chatbot_talkId').val(talkId);

          var targetTalkUrl = '';
          if (location.href.indexOf('www.thehandsome.com') > -1) {
            //운영
            //운영 챗봇 url
            targetTalkUrl =
              'https://talk.thehandsome.com/front/v1/jsp/view/chat.jsp';
          } else {
            //그외
            //개발 챗봇 url
            targetTalkUrl =
              'https://handsome-dev.enomix.co.kr/front/v1/jsp/view/chat.jsp';
          }

          $('#chatbotForm').attr('action', targetTalkUrl);

          $('#chatbotForm').submit();
        }
        return false;
      }
      /*
       * // 챗봇 관련 스크립트
       */

      function updateLocation() {
        $.ajax({
          type: 'POST',
          url: '/ko/mobilecommon/updateLocation',
          datatype: 'json',
          data: {
            CSRFToken: '73c7c901-c15e-40a0-873d-a9fc95a16280',
            provideLocationYN: $('#isChcked').val(),
          },
          error: function (request, status, error) {
            // 			console.log( "code:" + request.status+"\n\n\n\n" + "message:" + request.responseText+"\n\n\n\n" + "error:" + error );
          },
          success: function (result) {
            if (result == 'SUCCESS') {
            }
          },
        });
      }

      function updatePush() {
        $.ajax({
          type: 'POST',
          url: '/ko/mobilecommon/updatePush',
          datatype: 'json',
          data: {
            CSRFToken: '73c7c901-c15e-40a0-873d-a9fc95a16280',
            pushCd: $('#pushCd').val(),
            pushVal: $('#pushVal').val(),
          },
          error: function (request, status, error) {
            // 			console.log( "code:" + request.status+"\n\n\n\n" + "message:" + request.responseText+"\n\n\n\n" + "error:" + error );
          },
          success: function (result) {
            if (result == 'SUCCESS') {
            }
          },
        });
      }

      function AppCallLocation(result) {
        $('#isChcked').val(result);
        updateLocation();
      }

      function AppCallPushAll(result) {
        $('#pushCd').val('all');
        $('#pushVal').val(result);
        updatePush();
      }

      function AppCallPushOrder(result) {
        $('#pushCd').val('order');
        $('#pushVal').val(result);
        updatePush();
      }

      function AppCallPushEvent(result) {
        $('#pushCd').val('event');
        $('#pushVal').val(result);
        updatePush();
      }

      function AppCallPushBenefit(result) {
        $('#pushCd').val('benefit');
        $('#pushVal').val(result);
        updatePush();
      }

      function AppCallPushSilent(result) {
        $('#pushCd').val('silent');
        $('#pushVal').val(result);
        updatePush();
      }

      function gpsAllowAndroid() {
        // 가까운 매장순 탭 이동 및 리스트 호출
        if ('content1Page' == 'hsProductDetailPage') {
          if (appYn == 'Y') {
            Android.getLocation();

            $('.sort_tab li').removeClass('on');
            $('.sort_tab li').eq(0).addClass('on');
            setTimeout(function () {
              searchStore(1);
            }, 500);
          }
        } else if ('content1Page' == 'content1Page') {
          if (appYn == 'Y') {
            Android.getLocation();

            $('.sort_tab li').removeClass('on');
            $('.sort_tab li').eq(0).addClass('on');
            setTimeout(function () {
              searchStore(1);
            }, 500);
          }
        }
      }

      function gpsAlertExitAndroid() {
        // 재고 많은순 탭 선택
        if ('content1Page' == 'hsProductDetailPage') {
          if (appYn == 'Y') {
            $('.sort_tab li').removeClass('on');
            $('.sort_tab li').eq(1).addClass('on');
          }
        } else if ('content1Page' == 'content1Page') {
          if (appYn == 'Y') {
            $('.sort_tab li').removeClass('on');
            $('.sort_tab li').eq(1).addClass('on');
          }
        }
      }

      function gpsAlertOkAndroid() {
        // 재고 많은순 탭 선택
        if ('content1Page' == 'hsProductDetailPage') {
          if (appYn == 'Y') {
            $('.sort_tab li').removeClass('on');
            $('.sort_tab li').eq(1).addClass('on');
          }
        } else if ('content1Page' == 'content1Page') {
          if (appYn == 'Y') {
            $('.sort_tab li').removeClass('on');
            $('.sort_tab li').eq(1).addClass('on');
          }
        }
      }

      function gpsAlertExitIOS() {
        // 재고 많은순 탭 선택
        if ('content1Page' == 'hsProductDetailPage') {
          if (appYn == 'Y') {
            $('.sort_tab li').removeClass('on');
            $('.sort_tab li').eq(1).addClass('on');
          }
        } else if ('content1Page' == 'content1Page') {
          if (appYn == 'Y') {
            $('.sort_tab li').removeClass('on');
            $('.sort_tab li').eq(1).addClass('on');
          }
        }
      }

      function gpsSetOkIOS() {
        // 위치동의 여부 확인 후 (Y : 가까운 매장순 탭 이동 및 리스트 호출, N : 재고 많은순 탭 선택)
        if ('content1Page' == 'hsProductDetailPage') {
          if (appYn == 'Y') {
            webkit.messageHandlers.getLocation.postMessage('');

            setTimeout(function () {
              if (lat != 0 && lng != 0) {
                $('.sort_tab li').removeClass('on');
                $('.sort_tab li').eq(0).addClass('on');

                searchStore(1);
              }
            }, 500);
          }
        } else if ('content1Page' == 'content1Page') {
          if (appYn == 'Y') {
            webkit.messageHandlers.getLocation.postMessage('');

            setTimeout(function () {
              if (lat != 0 && lng != 0) {
                $('.sort_tab li').removeClass('on');
                $('.sort_tab li').eq(0).addClass('on');

                searchStore(1);
              }
            }, 500);
          }
        }
      }
    </script>

    <div
      class="divpop_wrap_dev pop_mbr pop_alert_confirm"
      id="popAlertConfirmDiv"></div>
  </body>
</html>
